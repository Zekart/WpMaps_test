<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <!-- INTERFACE -->
    <cc:interface>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>    
        <h:form id="ff" enctype="multipart/form-data">
        <style>
            .butAdd td, th {
                width: 17%;
                bottom: -283px;
                border: none;
                right: 0;
                position: relative;
            }
            .butCancel{
                top: 13px;
                right: 15px;
                position: absolute;

            }
            .butReset{
                top: 13px;
                right: 45px;
                position: absolute;                
            }
            .add_inputfield{
                width: 225px;
            }
            .add_inputfield_number_house{
                width: 40px !important
            }
            .add_select{
                width: 200px;
            }
            .ui-helper-reset {
                border-bottom: 1px red solid;
            }
            #upload_button{
                border: 1px solid red;
                width: 100px;
                height: 100px;
            }
            #upload_button input[type='file']{
                width: 100%;
                height: 100%;
            }
            
        </style>
        <p:commandButton value="Отмена" onclick="return cancel()" class="butCancel"></p:commandButton>
        <p:wizard id="wiz"  widgetVar="wizp" flowListener="#{pointWizard.onFlowProcess}"  >
            
            <p:tab id="obj" title="Объект">
                <p:panel style="background: transparent; border: none; ">
                    <p:messages />
                        <p:selectOneMenu id="object_t" value="#{gMapsController.obj_type}" style="width:150px" >  
                            <p:ajax update="gridPoint" />
                            <f:selectItems var="so" value="#{gMapsController.objectType}" itemValue="#{so}" itemLabel="#{so.object_type}"/>
                        </p:selectOneMenu>

                </p:panel>  
            </p:tab> 
            
            <p:tab id="point" title="Точка" >
                <div class="parent">
                    <div class="div1">
                        <p:panel id="gridPoint" style="background: transparent; border: none; " >

                            <h:panelGrid style="background: transparent; border: none; " rendered="#{gMapsController.obj_type == 'PILLAR'}" columns="2"  >

                                <p:row>
                                    <p:column>Транспортная подстанция </p:column>

                                </p:row>
                                <p:row>
                                    <p:inputText  id="pil_station" class="add_inputfield" required="true" value="#{mapObjController.pillar.transportStation}" requiredMessage="Пустые поля" >
                                    </p:inputText>                                           
                                </p:row>
                                <p:row>
                                    <p:column>Номер подстанции </p:column>
                                </p:row>
                                <p:row>
                                    <p:inputText id="pil_numbSration" required="true" class="add_inputfield" requiredMessage="Пустые поля" value="#{mapObjController.pillar.numberStation}" >
                                    </p:inputText>
                                </p:row>  
                                <p:row>
                                    <p:column>Адрес: </p:column>
                                </p:row>
                                <p:row>
                                    <p:inputText id="pil_address" required="true" class="add_inputfield" requiredMessage="Пустые поля" value="#{mapObjController.pillar.address}">
                                    </p:inputText>
                                </p:row>                     
                                <p:row>
                                    <p:column>Балансодержатель опоры </p:column>
                                </p:row>
                                <p:row>
                                    <p:selectOneMenu id="pil_owner" class="add_select" value="#{mapObjController.pillar.owner}" >
                                        <f:selectItems var="pil_owner" value="#{pillarController.pillarOwner}" itemValue="#{pil_owner.ownerType}" itemLabel="#{pil_owner.ownerType}"/>
                                    </p:selectOneMenu>        
                                </p:row>
                                <p:row>
                                    <p:column>Материал столба </p:column>
                                </p:row>
                                <p:row>
                                    <p:selectOneMenu id="pil_matheriall" class="add_select" value="#{mapObjController.pillar.material}">
                                        <f:selectItems var="pil_mat"  value="#{pillarController.pillarMaterial}" itemValue="#{pil_mat}" itemLabel="#{pil_mat.pillarMaterial}" />
                                    </p:selectOneMenu>                     
                                </p:row>   
                                <p:row>
                                    <p:column>Тип столба</p:column>
                                </p:row> 
                                <p:row>
                                    <p:selectOneMenu id="pil_type" class="add_select" value="#{mapObjController.pillar.type}" >
                                        <f:selectItems var="pil_type" value="#{pillarController.pillarType}" itemValue="#{pil_type}" itemLabel="#{pil_type.pilarType}"  />
                                    </p:selectOneMenu>     
                                </p:row>
                                <p:row>
                                    <p:column>Изображение</p:column>
                                </p:row>
                                <p:row>
                                    <p:fileUpload value="#{fileUploadView.image}" mode="simple" skinSimple="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                                </p:row>
                                <p:row>
                                    <p:commandButton value="Reset Code" update="gridPoint" process="@this" action="#{mapObjController.reset()}"  style="margin-right:20px;" />                                    
                                </p:row>
                                <p:row>
                                    <h:outputText value="Без муфты: " />
                                    <h:selectBooleanCheckbox value="#{pointWizard.skip}" />                        
                                </p:row>                    
                            </h:panelGrid>    

                            <h:panelGrid style="background: transparent; border: none; " rendered="#{gMapsController.obj_type == 'HOUSE'}" columns="2" >
                                <p:row >
                                    <p:column>Тип дома </p:column>
                                </p:row>
                                <p:row>
                                    <p:selectOneMenu id="h_type" class="add_select" value="#{mapObjController.house.type_house}" >
                                        <f:selectItems var="h_type" value="#{houseController.houseType}" itemValue="#{h_type}" itemLabel="#{h_type.houseType}" />
                                        <p:ajax update="type_house_panel" />
                                    </p:selectOneMenu>        
                                </p:row>
                                <p:row>
                                    <p:column>Адрес: </p:column>
                                </p:row>
                                <p:row>
                                    Ул. 
                                    <p:inputText id="h_street" value="#{mapObjController.house.address}" class="add_inputfield">
                                        <f:validateLength minimum="1" />
                                    </p:inputText>
                                    № 
                                    <p:inputText id="h_number" value="#{mapObjController.house.house_number}" class="add_inputfield_number_house" >
                                        <f:validateLength minimum="1" />
                                    </p:inputText>
                                </p:row>                     
                                <p:row>
                                    <p:column>Изображение</p:column>
                                </p:row>
                                <p:row>
                                    <p:fileUpload value="#{fileUploadView.image}" mode="simple" skinSimple="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                                </p:row>                              
                                <p:row> 
                                    <h:outputText value="Без муфты: " />                                       
                                </p:row>
                                <p:row>      
                                    <p:selectBooleanCheckbox value="#{pointWizard.skip}" />                                     
                                </p:row>  
                                <f:facet name="footer">
                                    <h:panelGroup id="type_house_panel" style="display:block;text-align:left"  >
                                        <p:outputPanel  rendered="#{mapObjController.house.type_house == 'SINGLE'}" autoUpdate="true">
                                            <h:panelGrid style="background: transparent; border: none; " columns="2" >
                                                <p:row> 
                                                    <h:outputText value="Б.Я: " />                                       
                                                </p:row>
                                                <p:row>      
                                                    <p:selectBooleanCheckbox value="#{mapObjController.house.bigBox}" />                                     
                                                </p:row>                                                
                                            </h:panelGrid>
                                        </p:outputPanel>
                                        <p:outputPanel  rendered="#{mapObjController.house.type_house == 'COMMUNAL_APPARTMENT'}" autoUpdate="true">
                                            <p:outputLabel value="Коммуналка"/>
                                        </p:outputPanel>
                                        <p:outputPanel  rendered="#{mapObjController.house.type_house == 'MULTYAPARTMENTS'}" autoUpdate="true">
                                            <div class="ui-g">
                                                <div class="ui-g-12 ui-g-nopad" style="padding: 0;">
                                                    <div class="ui-g-5" style="padding: 0;">Владелец</div>
                                                    <div class="ui-g-5" style=" padding: 0 0 0 40px;">
                                                        <p:selectOneMenu id="h_owner" class="add_select" value="#{mapObjController.house.owner}" >
                                                            <f:selectItems var="h_owner" value="#{houseController.houseOwner}" itemValue="#{h_owner}" itemLabel="#{h_owner.houseOwner}"/>
                                                        </p:selectOneMenu>                                                                                                                
                                                    </div>
                                                </div>
                                                <div class="ui-g-12 ui-g-nopad">
                                                    <div class="ui-g-5" style="padding: 0;">Название</div>
                                                    <div class="ui-g-5" style=" padding: 0 0 0 40px;">
                                                        <p:inputText id="h_name" value="#{mapObjController.house.house_name}" class="add_inputfield"/>                                                                                                               
                                                    </div>
                                                </div> 
                                                <div class="ui-g-12 ui-g-nopad" >
                                                    <div class="ui-g-5" style="padding: 0;">Этажность</div>
                                                    <div class="ui-g-5" style=" padding: 0 0 0 40px;">
                                                        <p:inputText id="h_floor" value="#{mapObjController.house.count_floor}" class="add_inputfield"/>                                                                                                              
                                                    </div>
                                                </div> 
                                                <div class="ui-g-12 ui-g-nopad">
                                                    <div class="ui-g-5" style="padding: 0;">Кол-во подъездов </div>
                                                    <div class="ui-g-5" style=" padding: 0 0 0 40px;">
                                                        <p:inputText id="h_entrance" value="#{mapObjController.house.count_entrance}" class="add_inputfield"/>                                                                                                             
                                                    </div>
                                                </div>                                                
                                            </div>
                                        </p:outputPanel>                        
                                    </h:panelGroup>
                                </f:facet>                                
                            </h:panelGrid>

                            <h:panelGrid style="background: transparent; border: none; "  rendered="#{gMapsController.obj_type == 'DRAW_WELL'}" columns="2" >
 
                                <p:row>
                                    <p:column>№ колодца: </p:column>
                                </p:row>
                                <p:row>
                                    <p:inputText  value="#{mapObjController.drawWell.numberStation}" class="add_inputfield">
                                        <f:validateLength minimum="1" />
                                    </p:inputText>
                                </p:row>
                                <p:row>
                                    <p:column>№ канала: </p:column>
                                </p:row>
                                <p:row>
                                    <p:inputText  value="#{mapObjController.drawWell.chanel_number}" class="add_inputfield">
                                        <f:validateLength minimum="1" />
                                    </p:inputText>
                                </p:row> 
                                <p:row>
                                    <h:outputText value="Приямок: " />
                                </p:row>
                                <p:row>
                                    <p:selectBooleanCheckbox value="#{mapObjController.drawWell.pit}" />
                                </p:row>                                                                                        
                                <p:row>
                                    <h:outputText value="Без муфты: " />                      
                                </p:row>        
                                <p:row>
                                    <p:selectBooleanCheckbox value="#{pointWizard.skip}" />                        
                                </p:row>    
                                <p:row>
                                    <p:column>Изображение</p:column>
                                </p:row>
                                <p:row>
                                    <p:fileUpload value="#{fileUploadView.image}" mode="simple"  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                                </p:row>                                
                            </h:panelGrid>    
                        </p:panel>

                    </div >                                                       
                </div>        
            </p:tab>
            <p:tab id="clutchInfo" title="Муфта">      
        <div class="parent">
            <div class="div1" style="width: 100%">
                <p:dataTable style=" bottom: 0;" var="line" value="#{mapObjController.clutch}" id="dataTableSaisiePiece" editable="true" widgetVar="cellClutch">                   
                    <p:column style="bottom: 0;" headerText="Кол. кассет">
                        <p:inputText value="#{line.cassetsCount}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column style="bottom: 0;" headerText="Состояние">
                        <p:inputText value="#{line.conditions}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column style="bottom: 0;" headerText="Доп.инфо">
                        <p:inputText value="#{line.info}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column style="bottom: 0;" headerText="Входы">
                        <p:inputText value="#{line.inputs}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>                         
                </p:dataTable>              
                <p:commandButton actionListener="#{mapObjController.newLine(actionEvent)}"
                    value="New" update="dataTableSaisiePiece" ajax="true" />
                <p:commandButton actionListener="#{mapObjController.delLine(actionEvent)}"
                    value="delete" update="dataTableSaisiePiece" ajax="true" />
            </div>

        </div>
            </p:tab> 
<!--            <p:tab id="cabel_add" title="Кабель">           
                <p:dataTable var="cabel" value="{gMapsController.cabels}"
                        id="dataTableSaisieCabel">

                    <p:column headerText="Вместимость">
                        <p:inputText value="{cabel.capacity}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>                    
                    <p:column headerText="Введён в">
                        <p:inputText value="{cabel.inplace}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column headerText="Выведен с">
                        <p:inputText value="{cabel.outPlace}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column headerText="Длинна">
                        <p:inputText value="{cabel.lenthCable}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>

                    <p:column headerText="Маркировка">
                        <p:inputText value="{cabel.marking}" ><f:validateLength minimum="1" /></p:inputText>
                    </p:column>                         

                    </p:dataTable>

                <p:commandButton actionListener="{gMapsController.newLineC}"
                    value="New" update="dataTableSaisieCabel" ajax="true" />
            </p:tab>   -->         
            <p:tab id="confirm" title="Добавление">
                <div class="parent">
                    <div class="div1" style="width: 100%;">
                        <p:panel id="outShowAdd" style="background: transparent; border: none; " >
                            <h:panelGrid columns="2" columnClasses="label, value">
                                <h:outputText value="Тип объекта: " />
                                <h:outputText value="#{gMapsController.obj_type.object_type}" styleClass="outputLabel"/>                                          
                            </h:panelGrid>    
                        </p:panel>
                    </div>
                    <div>

                    </div>
                    <h:panelGrid class="butAdd"  rendered="#{gMapsController.obj_type == 'DRAW_WELL'}"  >
                        <p:commandButton value="Подтвердить" style="margin-left: 86%;margin-top: 25px;" actionListener="#{mapObjController.saveDrawWell()}" action="#{gMapsController.initPoint()}" validateClient="true" update="gmap">
                            <p:ajax oncomplete="PF('wizp').loadStep('obj',false);"/>
                        </p:commandButton>
                    </h:panelGrid> 
                    <h:panelGrid class="butAdd"  rendered="#{gMapsController.obj_type == 'HOUSE'}"  >
                        <p:commandButton value="Подтвердить" style="margin-left: 86%;margin-top: 25px;" actionListener="#{mapObjController.saveHouse()}" action="#{gMapsController.initPoint()}"  validateClient="true" update="gmap">
                            <p:ajax oncomplete="PF('wizp').loadStep('obj',false);" resetValues="true"/>
                        </p:commandButton>
                    </h:panelGrid>
                    <h:panelGrid class="butAdd"  rendered="#{gMapsController.obj_type == 'PILLAR'}"  >
                        <p:commandButton value="Подтвердить" style="margin-left: 86%;margin-top: 25px;" actionListener="#{mapObjController.savePillar()}" action="#{gMapsController.initPoint()}"   validateClient="true" update="gmap">
                            <p:ajax oncomplete="PF('wizp').loadStep('obj',false);"  resetValues="true"/>
                        </p:commandButton>
                    </h:panelGrid> 
                            <!--
                            <p:commandButton value="Submit" actionListener="{gMapsController.addMarkerP()}" validateClient="true" update="@all">
                                <f:setPropertyActionListener target="{pointWizard.data}" value="{gMapsController.obj_type}" />                                
                            </p:commandButton>
                            -->
                    <p:commandButton value="Отмена"  onclick="return cancel()" class="butCancel">
                        <p:ajax oncomplete="PF('wizp').loadStep('obj',false);" />
                    </p:commandButton>
                </div>
            </p:tab>                  
        </p:wizard>   
            <h:inputHidden id="lat" value="#{mapObjController.lat}" />
            <h:inputHidden id="lng" value="#{mapObjController.lng}" /> 
        </h:form> 
    </cc:implementation>
</html>