<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <!-- INTERFACE -->
    <cc:interface>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>                  
        <p:wizard id="wiz"  widgetVar="wizp" flowListener="#{pointWizard.onFlowProcess}" >
            <p:tab id="obj" title="Объект">
                <p:panel>
                    <p:messages />
                        <p:selectOneMenu id="object_t" value="#{gMapsController.obj_type}" style="width:150px" >  
                            <p:ajax update="gridPoint" />
                            <f:selectItems var="so" value="#{gMapsController.objectType}" itemValue="#{so}" itemLabel="#{so.object_type}"/>
                        </p:selectOneMenu>
                </p:panel>
               
            </p:tab>            
            <p:tab id="point" title="Точка">
            <p:panel id="gridPoint" style="border: 0 solid white" >

                <h:panelGrid rendered="#{gMapsController.obj_type == 'PILLAR'}" columns="2"  >
                    <p:row>
                        <p:column>Транспортная подстанция </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText  id="pil_name" required="true" value="#{gMapsController.transportStation}" requiredMessage="Пустые поля"  style="width: 140px;">
                        </p:inputText>                                           
                    </p:row>
                    <p:row>
                        <p:column>Номер подстанции </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText required="true" requiredMessage="Пустые поля" value="#{gMapsController.numberStation}" style="width: 140px;">
                        </p:inputText>
                    </p:row>  
                    <p:row>
                        <p:column>Адрес: </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText required="true" requiredMessage="Пустые поля" value="#{gMapsController.address}" style="width: 140px;">
                        </p:inputText>
                    </p:row>                     
                    <p:row>
                        <p:column>Балансодержатель опоры </p:column>
                    </p:row>
                    <p:row>
                        <p:selectOneMenu id="pillar_owner" value="#{gMapsController.owner}" style="width:140px;" >
                            <f:selectItems var="st" value="#{gMapsController.pillarOwner}" itemValue="#{st.ownerType}" itemLabel="#{st.ownerType}"/>
                        </p:selectOneMenu>        
                    </p:row>
                    <p:row>
                        <p:column>Материал столба </p:column>
                    </p:row>
                    <p:row>
                        <p:selectOneMenu id="matheriall" value="#{gMapsController.matheriallPillar}" style="width:140px;">
                            <f:selectItems var="mat"  value="#{gMapsController.pillarMaterial}" itemValue="#{mat}" itemLabel="#{mat.pillarMaterial}" />
                        </p:selectOneMenu>                     
                    </p:row>   
                    <p:row>
                        <p:column>Тип столба</p:column>
                    </p:row> 
                    <p:row>
                        <p:selectOneMenu id="pillar_type" value="#{gMapsController.typePillar}" style="width:140px">
                            <f:selectItems var="pl" value="#{gMapsController.pillarType}" itemValue="#{pl}" itemLabel="#{pl.pilarType}"  />
                        </p:selectOneMenu>     
                    </p:row>
                    <p:row>
                        <p:column>Изображение</p:column>
                    </p:row>
                    <p:row>
                        <p:fileUpload value="#{fileUploadView.file}" mode="simple" skinSimple="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                    </p:row>
                    <p:row>                    
                    </p:row>
                    <p:row>
                        <h:outputText value="Без муфты: " />
                        <h:selectBooleanCheckbox value="#{pointWizard.skip}" />                        
                    </p:row>

                </h:panelGrid>    

                <h:panelGrid rendered="#{gMapsController.obj_type == 'HOUSE'}" columns="2" >
                    <p:row>
                        <p:column>Транспортная подстанция </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText value="#{gMapsController.transportStation}" >
                            <f:validateLength minimum="1" />
                        </p:inputText>                                           
                    </p:row>
                    <p:row>
                        <p:column>Номер подстанции </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText  value="#{gMapsController.numberStation}">
                            <f:validateLength minimum="1" />
                        </p:inputText>
                    </p:row> 
                    <p:row>
                        <p:column>Адрес: </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText id="addressP" value="#{gMapsController.address}">
                            <f:validateLength minimum="1" />
                        </p:inputText>
                    </p:row>                     
                    <p:row>
                        <p:column><p:outputLabel for="house_type" value="Тип дома" /> </p:column>
                    </p:row>
                    <p:row>
                        <p:selectOneMenu id="house_type" value="#{gMapsController.typeOfHouse}" style="width:150px" >
                            <f:selectItems var="ht" value="#{gMapsController.houseType}" itemValue="#{ht}" itemLabel="#{ht.houseType}"/>
                        </p:selectOneMenu>        
                    </p:row>
                    <p:row>
                        <p:column>Владелец</p:column>
                    </p:row>         
                    <p:row>
                        <p:selectOneMenu id="house_owner" value="#{gMapsController.owner}" style="width:150px" >
                            <f:selectItems var="ho" value="#{gMapsController.houseOwner}" itemValue="#{ho}" itemLabel="#{ho.houseOwner}"/>
                        </p:selectOneMenu>        
                    </p:row>
                    <p:row>
                        <p:column>Изображение</p:column>
                    </p:row>
                    <p:row>
                        <p:fileUpload value="#{fileUploadView.file}" mode="simple" skinSimple="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                    </p:row>                    
                    <p:row>                    
                    </p:row>
                    <p:row>
                        <h:outputText value="Без муфты:" />
                        <h:selectBooleanCheckbox value="#{pointWizard.skip}" />                        
                    </p:row>
                </h:panelGrid>

                <h:panelGrid rendered="#{gMapsController.obj_type == 'DRAW_WELL'}" columns="2" >
                    <p:row>
                        <p:column>Тип</p:column>
                    </p:row> 
                    <p:row>                    
                        <p:selectOneMenu id="drawWell_type" value="#{gMapsController.type_drawWell}" style="width:150px" >
                            <f:selectItems var="ht" value="#{gMapsController.drawWellType}" itemValue="#{ht}" itemLabel="#{ht.drawWellType}"/>
                        </p:selectOneMenu>        
                    </p:row>
                    <p:row>
                        <p:column>Адрес: </p:column>
                    </p:row>
                    <p:row>
                        <p:inputText  value="#{gMapsController.address}">
                            <f:validateLength minimum="1" />
                        </p:inputText>
                    </p:row>                     
                    <p:row>
                        <p:column>Владелец</p:column>
                    </p:row>         
                    <p:row>
                        <p:selectOneMenu id="drawWell_owner" value="#{gMapsController.owner}" style="width:150px" >
                            <f:selectItems var="ho" value="#{gMapsController.drawWellOwner}" itemValue="#{ho}" itemLabel="#{ho.drawWellOwner}"/>
                        </p:selectOneMenu>        
                    </p:row>
                    <p:row>
                        <p:column>Изображение</p:column>
                    </p:row>
                    <p:row>

                    </p:row>                    
                    <p:row>                       
                    </p:row>
                    <p:row>
                        <h:outputText value="Без муфты: " />
                        <h:selectBooleanCheckbox value="#{pointWizard.skip}" />                        
                    </p:row>
                </h:panelGrid>    
            </p:panel>                               
            </p:tab>
            <p:tab id="clutchInfo" title="Муфта">           

                <h:panelGrid columns="2" columnClasses="label, value">
                    <h:outputText value="Адрес: " />
                    <p:inputText value="#{gMapsController.clutch.address}" ><f:validateLength minimum="1" /></p:inputText>

                    <h:outputText value="Кол. кассет: " />
                    <p:inputText value="#{gMapsController.clutch.cassetsCount}" ><f:validateLength minimum="1" /></p:inputText>

                    <h:outputText value="Состояние: " />
                    <p:inputText value="#{gMapsController.clutch.conditions}" ><f:validateLength minimum="1" /></p:inputText>

                    <h:outputText value="Доп.инфо: " />
                    <p:inputText value="#{gMapsController.clutch.info}" ><f:validateLength minimum="1" /></p:inputText>

                    <h:outputText value="Входы: " />
                    <p:inputText value="#{gMapsController.clutch.inputs}" ><f:validateLength minimum="1" /></p:inputText>                        
                </h:panelGrid>                    
                
            </p:tab>             
        <p:tab id="confirm" title="Добавление">
            <p:panel header="Будет создано">
                <h:panelGrid id="confirmation" columns="3" columnClasses="grid,grid,grid">
                    <h:panelGrid columns="2" columnClasses="label, value">
                        <h:outputText value="Тип объекта: " />
                        <h:outputText value="#{gMapsController.obj_type.object_type}" styleClass="outputLabel"/>
 
                        <h:outputText value="Транспортная подстанция: " />
                        <h:outputText value="#{gMapsController.transportStation}" styleClass="outputLabel"/>
 
                        <h:outputText value="Номер подстанции: " />
                        <h:outputText value="#{gMapsController.numberStation}" styleClass="outputLabel"/>
                        
                        <h:outputText value="Адрес: " />
                        <h:outputText value="#{gMapsController.address}" styleClass="outputLabel"/>                        
                        
                        <h:outputText value="Балансодержатель: " />
                        <h:outputText value="#{gMapsController.owner}" styleClass="outputLabel"/>
                        
                    </h:panelGrid>
                    
                </h:panelGrid>
                <h:panelGrid rendered="#{gMapsController.obj_type == 'DRAW_WELL'}" columns="2" >
                    <p:commandButton value="Подтвердить" actionListener="#{gMapsController.addMarkerW()}" validateClient="true" update="gmap">
                        <p:ajax oncomplete="PF('wizp').loadStep('obj',false)" resetValues="true"/>
                    </p:commandButton>
                </h:panelGrid> 
                <h:panelGrid rendered="#{gMapsController.obj_type == 'HOUSE'}" columns="2" >
                    <p:commandButton value="Подтвердить" actionListener="#{gMapsController.addMarkerH()}" validateClient="true" update="gmap">
                        <p:ajax oncomplete="PF('wizp').loadStep('obj',false)" resetValues="true"/>
                    </p:commandButton>
                </h:panelGrid>
                <h:panelGrid rendered="#{gMapsController.obj_type == 'PILLAR'}" columns="2" >
                    <p:commandButton value="Подтвердить" actionListener="#{gMapsController.addMarkerP()}" validateClient="true" update="gmap">
                        <p:ajax oncomplete="PF('wizp').loadStep('obj',false)" resetValues="true"/>
                    </p:commandButton>
                </h:panelGrid> 
                <!--
                <p:commandButton value="Submit" actionListener="{gMapsController.addMarkerP()}" validateClient="true" update="@all">
                    <f:setPropertyActionListener target="{pointWizard.data}" value="{gMapsController.obj_type}" />                                
                </p:commandButton>
                -->
            </p:panel>
        </p:tab>            
        </p:wizard>
        <p:commandLink id="ajax" onclick="return cancel()">
            <h:outputText value="Отмена"  />
        </p:commandLink>         
    </cc:implementation>
</html>